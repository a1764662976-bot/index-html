<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="description" content="412ä½å¹¿ä¸œå¹´è½»äººå…³äºå©šæ‹çš„çœŸå®é€‰æ‹©ä¸å›°å¢ƒ">
<title>2025ï¼Œä½ è¿˜ç›¸ä¿¡å©šå§»å—ï¼Ÿï½œå¹¿ä¸œé’å¹´å©šæ‹è§‚è°ƒç ”æŠ¥å‘Š</title>

<!-- Swiper -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"></script>
<!-- ECharts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
<!-- html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700;900&family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

  :root {
    --coral: #FF6B6B;
    --teal: #4ECDC4;
    --dark: #1a1a1a;
    --light-bg: #F5F5F0;
    --white: #FFFFFF;
    --gold: #F7C59F;
    --muted: #888;
    --serif: 'Noto Serif SC', serif;
    --sans: 'Noto Sans SC', 'PingFang SC', 'Microsoft YaHei', sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

  html, body {
    width: 100%; height: 100%;
    overflow: hidden;
    font-family: var(--sans);
    background: #000;
  }

  .swiper { width: 100%; height: 100vh; }
  .swiper-slide {
    width: 375px; max-width: 100%;
    height: 100vh;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    padding: 24px 28px;
    overflow: hidden;
    position: relative;
  }
  .swiper-slide:nth-child(odd)  { background: var(--light-bg); }
  .swiper-slide:nth-child(even) { background: var(--white); }

  /* â”€â”€â”€ Page Decorations â”€â”€â”€ */
  .page-num {
    position: absolute; top: 20px; right: 24px;
    font-size: 11px; color: var(--muted); letter-spacing: 2px;
    font-family: var(--sans); font-weight: 300;
  }
  .swipe-hint {
    position: absolute; bottom: 28px; left: 50%; transform: translateX(-50%);
    display: flex; flex-direction: column; align-items: center; gap: 6px;
    animation: bounce 2s infinite;
    color: var(--muted); font-size: 12px; letter-spacing: 1px;
  }
  .swipe-hint svg { width: 20px; height: 20px; stroke: var(--muted); }
  @keyframes bounce { 0%,100%{transform:translateX(-50%) translateY(0)} 50%{transform:translateX(-50%) translateY(-6px)} }

  /* â”€â”€â”€ Typography â”€â”€â”€ */
  .serif { font-family: var(--serif); }
  .page-label {
    font-size: 10px; letter-spacing: 3px; text-transform: uppercase;
    color: var(--coral); font-weight: 700; margin-bottom: 12px;
    font-family: var(--sans);
  }
  .big-title {
    font-family: var(--serif);
    font-size: 32px; font-weight: 900; line-height: 1.3;
    color: var(--dark);
  }
  .sub-title {
    font-size: 15px; color: #555; line-height: 1.8;
    font-family: var(--sans); font-weight: 300;
    margin-top: 14px;
  }
  .highlight { color: var(--coral); font-weight: 700; }
  .teal-text { color: var(--teal); font-weight: 700; }

  /* â”€â”€â”€ Buttons â”€â”€â”€ */
  .btn {
    display: inline-flex; align-items: center; justify-content: center;
    padding: 14px 28px; border-radius: 50px; border: none; cursor: pointer;
    font-size: 15px; font-weight: 700; font-family: var(--sans);
    transition: all .2s; letter-spacing: .5px;
    min-width: 140px;
  }
  .btn-primary { background: var(--coral); color: #fff; box-shadow: 0 6px 20px rgba(255,107,107,.35); }
  .btn-primary:active { transform: scale(.96); box-shadow: 0 2px 8px rgba(255,107,107,.3); }
  .btn-secondary { background: var(--teal); color: #fff; box-shadow: 0 6px 20px rgba(78,205,196,.35); }
  .btn-secondary:active { transform: scale(.96); }
  .btn-outline { background: transparent; color: var(--dark); border: 2px solid var(--dark); }
  .btn-outline:active { background: var(--dark); color: #fff; }
  .btn-sm { padding: 10px 20px; font-size: 13px; min-width: 0; }
  .btn-full { width: 100%; }

  /* â”€â”€â”€ PAGE 1 COVER â”€â”€â”€ */
  #slide-1 {
    background: linear-gradient(155deg, #1a0a0a 0%, #2d1515 40%, #1a1a2e 100%) !important;
    justify-content: flex-start; padding-top: 80px;
  }
  #slide-1 .cover-deco {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; overflow: hidden;
  }
  #slide-1 .cover-deco::before {
    content: 'å©š'; position: absolute; right: -20px; top: 60px;
    font-family: var(--serif); font-size: 220px; font-weight: 900;
    color: rgba(255,107,107,.06); line-height: 1;
  }
  #slide-1 .cover-deco::after {
    content: ''; position: absolute; width: 300px; height: 300px;
    border-radius: 50%; background: radial-gradient(circle, rgba(78,205,196,.12) 0%, transparent 70%);
    bottom: -80px; left: -80px;
  }
  .cover-year {
    font-size: 13px; letter-spacing: 6px; color: var(--teal);
    font-family: var(--sans); font-weight: 300; margin-bottom: 20px;
  }
  .cover-main {
    font-family: var(--serif); font-size: 36px; font-weight: 900;
    color: #fff; line-height: 1.35; z-index: 1;
  }
  .cover-main .q-mark { color: var(--coral); }
  .cover-sub {
    font-size: 14px; color: rgba(255,255,255,.6); margin-top: 16px;
    font-weight: 300; line-height: 1.8; z-index: 1;
  }
  .cover-divider {
    width: 40px; height: 2px; background: var(--coral);
    margin: 24px 0; z-index: 1;
  }
  .cover-btns { display: flex; flex-direction: column; gap: 14px; width: 100%; z-index: 1; }
  .cover-btns .btn { width: 100%; }
  .cover-footer {
    position: absolute; bottom: 28px; left: 28px; right: 28px;
    display: flex; justify-content: space-between; align-items: center; z-index: 1;
  }
  .cover-footer span { font-size: 10px; color: rgba(255,255,255,.3); letter-spacing: 1px; }

  /* â”€â”€â”€ PAGE 2 ROLE â”€â”€â”€ */
  #slide-2 { background: var(--white) !important; }
  .role-card {
    background: #fafafa; border-radius: 20px;
    padding: 28px 24px; border: 1px solid #eee;
    position: relative; overflow: hidden; width: 100%;
  }
  .role-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
    background: linear-gradient(90deg, var(--coral), var(--teal));
  }
  .role-avatar {
    width: 56px; height: 56px; border-radius: 50%;
    background: linear-gradient(135deg, var(--coral), var(--teal));
    display: flex; align-items: center; justify-content: center;
    font-size: 24px; margin-bottom: 16px;
  }
  .role-text {
    font-size: 15px; line-height: 2; color: #333; font-family: var(--serif);
  }
  .role-text em { font-style: normal; color: var(--coral); font-weight: 700; }

  /* â”€â”€â”€ PAGE 3-5 CHOICE â”€â”€â”€ */
  .scene-card {
    background: linear-gradient(135deg, #fff8f8, #fff);
    border-radius: 16px; padding: 20px; width: 100%;
    border-left: 4px solid var(--coral); margin-bottom: 20px;
    box-shadow: 0 4px 20px rgba(0,0,0,.06);
  }
  .scene-icon { font-size: 32px; margin-bottom: 8px; }
  .scene-text { font-size: 14px; color: #444; line-height: 1.8; }
  .choices { display: flex; flex-direction: column; gap: 12px; width: 100%; }
  .choice-btn {
    background: #fff; border: 2px solid #e8e8e8; border-radius: 14px;
    padding: 16px 20px; cursor: pointer; transition: all .2s;
    display: flex; align-items: flex-start; gap: 14px;
    font-family: var(--sans);
  }
  .choice-btn:active, .choice-btn.selected { border-color: var(--coral); background: #fff5f5; }
  .choice-letter {
    width: 28px; height: 28px; border-radius: 50%;
    background: var(--coral); color: #fff;
    display: flex; align-items: center; justify-content: center;
    font-weight: 900; font-size: 13px; flex-shrink: 0;
  }
  .choice-btn.b .choice-letter { background: var(--teal); }
  .choice-btn.c .choice-letter { background: #9B59B6; }
  .choice-text { font-size: 14px; color: #333; line-height: 1.6; }

  /* â”€â”€â”€ Modal â”€â”€â”€ */
  .modal-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,.6); z-index: 999;
    display: flex; align-items: flex-end; justify-content: center;
    opacity: 0; pointer-events: none; transition: opacity .3s;
  }
  .modal-overlay.show { opacity: 1; pointer-events: all; }
  .modal-card {
    background: #fff; border-radius: 24px 24px 0 0;
    padding: 32px 28px 48px; width: 100%; max-width: 375px;
    transform: translateY(100%); transition: transform .35s ease;
  }
  .modal-overlay.show .modal-card { transform: translateY(0); }
  .modal-emoji { font-size: 40px; margin-bottom: 12px; }
  .modal-title { font-size: 18px; font-weight: 900; color: var(--dark); font-family: var(--serif); margin-bottom: 8px; }
  .modal-stat { font-size: 38px; font-weight: 900; color: var(--coral); font-family: var(--serif); }
  .modal-desc { font-size: 13px; color: #666; line-height: 1.8; margin-top: 8px; }
  .modal-bar { height: 6px; border-radius: 3px; background: #f0f0f0; margin-top: 16px; overflow: hidden; }
  .modal-bar-fill { height: 100%; background: linear-gradient(90deg, var(--coral), var(--teal)); border-radius: 3px; transition: width 1s ease; }

  /* â”€â”€â”€ PAGE 6 RESULT â”€â”€â”€ */
  .result-badge {
    background: linear-gradient(135deg, var(--coral), #ff9a9a);
    color: #fff; border-radius: 50px; padding: 6px 20px;
    font-size: 12px; font-weight: 700; letter-spacing: 2px;
    margin-bottom: 16px;
  }
  .result-type { font-size: 28px; font-weight: 900; font-family: var(--serif); color: var(--dark); margin-bottom: 16px; }
  .result-desc { font-size: 14px; color: #555; line-height: 2; }
  .result-traits { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 16px; }
  .trait-tag {
    background: #f0fffe; border: 1px solid var(--teal);
    color: var(--teal); border-radius: 20px; padding: 4px 14px;
    font-size: 12px; font-weight: 700;
  }

  /* â”€â”€â”€ CHARTS â”€â”€â”€ */
  .chart-wrap { width: 100%; height: 260px; }
  .chart-note {
    font-size: 12px; color: #888; text-align: center;
    margin-top: 8px; line-height: 1.6; padding: 0 8px;
  }
  .data-highlight {
    background: linear-gradient(135deg, #fff5f5, #fff8ff);
    border-radius: 14px; padding: 16px 20px; width: 100%;
    border: 1px solid #ffe0e0; margin-bottom: 16px;
  }
  .data-num { font-size: 42px; font-weight: 900; color: var(--coral); font-family: var(--serif); line-height: 1; }
  .data-unit { font-size: 14px; color: #888; margin-top: 4px; }

  /* â”€â”€â”€ STRUGGLE PAGES (11-13) â”€â”€â”€ */
  .struggle-page { background: #fff !important; }
  .struggle-num {
    font-size: 100px; font-weight: 900; font-family: var(--serif);
    color: rgba(255,107,107,.08); position: absolute;
    top: 20px; right: -10px; line-height: 1;
  }
  .stat-row { display: flex; align-items: baseline; gap: 6px; margin-bottom: 12px; }
  .stat-big { font-size: 48px; font-weight: 900; font-family: var(--serif); color: var(--coral); }
  .stat-label { font-size: 14px; color: #555; }
  .vs-arrow { font-size: 22px; color: var(--teal); margin: 4px 0; }
  .struggle-quote {
    font-family: var(--serif); font-size: 20px; font-weight: 700;
    color: var(--dark); line-height: 1.8; width: 100%; margin-bottom: 20px;
  }
  .struggle-quote .red { color: var(--coral); }

  /* â”€â”€â”€ PAGE 14 TURN â”€â”€â”€ */
  #slide-14 { background: linear-gradient(160deg, #0f1923 0%, #1a2a3a 100%) !important; }
  .turn-title {
    font-family: var(--serif); font-size: 28px; font-weight: 900;
    color: #fff; text-align: center; line-height: 1.5; margin-bottom: 32px;
  }
  .turn-btns { display: flex; flex-direction: column; gap: 14px; width: 100%; }
  .turn-result {
    background: rgba(255,255,255,.08); border-radius: 16px;
    padding: 20px; width: 100%; display: none;
    border: 1px solid rgba(255,255,255,.12);
  }
  .turn-result.show { display: block; }
  .turn-result-text { font-size: 14px; color: rgba(255,255,255,.85); line-height: 2; font-family: var(--serif); }

  /* â”€â”€â”€ PAGE 15 SUMMARY â”€â”€â”€ */
  #slide-15 { background: linear-gradient(160deg, #0a1628 0%, #1a3a2a 100%) !important; }
  .summary-circle {
    width: 160px; height: 160px; border-radius: 50%;
    border: 2px solid rgba(78,205,196,.4);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    margin-bottom: 28px; position: relative;
  }
  .summary-circle::before {
    content: ''; position: absolute; inset: 8px; border-radius: 50%;
    border: 1px solid rgba(78,205,196,.2);
  }
  .summary-circle::after {
    content: ''; position: absolute; inset: -8px; border-radius: 50%;
    border: 1px dashed rgba(255,107,107,.2);
    animation: spin 20s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  .summary-icon { font-size: 48px; }
  .summary-text {
    font-family: var(--serif); font-size: 20px; font-weight: 700;
    color: #fff; text-align: center; line-height: 1.9;
  }
  .summary-text .tl { color: var(--teal); }
  .summary-text .cr { color: var(--coral); }

  /* â”€â”€â”€ PAGE 16 END â”€â”€â”€ */
  #slide-16 { background: #fff !important; }
  .end-quote {
    font-family: var(--serif); font-size: 18px; font-weight: 700;
    color: var(--dark); line-height: 2; text-align: center;
    margin-bottom: 32px;
  }
  .end-quote .line2 { color: var(--teal); }
  .end-btns { display: flex; flex-direction: column; gap: 12px; width: 100%; }
  .brand { font-size: 11px; color: #ccc; letter-spacing: 2px; margin-top: 20px; }

  /* â”€â”€â”€ POSTER OVERLAY â”€â”€â”€ */
  #poster-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,.85); z-index: 9999;
    display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px;
  }
  #poster-overlay.show { display: flex; }
  #poster-card {
    width: 320px; background: linear-gradient(155deg, #1a0a0a, #2d1515, #1a1a2e);
    border-radius: 20px; padding: 36px 28px; color: #fff; text-align: center;
  }
  .poster-logo { font-size: 11px; letter-spacing: 3px; color: var(--teal); margin-bottom: 20px; }
  .poster-title { font-family: var(--serif); font-size: 28px; font-weight: 900; line-height: 1.4; margin-bottom: 8px; }
  .poster-type {
    background: var(--coral); color: #fff; border-radius: 20px;
    padding: 4px 16px; font-size: 12px; font-weight: 700;
    display: inline-block; margin: 12px 0;
  }
  .poster-desc { font-size: 13px; color: rgba(255,255,255,.7); line-height: 1.8; margin-bottom: 20px; }
  .poster-qr {
    width: 80px; height: 80px; background: #fff; border-radius: 8px;
    margin: 0 auto 12px;
    display: flex; align-items: center; justify-content: center;
    font-size: 9px; color: #333; text-align: center; padding: 4px;
  }
  .poster-footer { font-size: 10px; color: rgba(255,255,255,.4); letter-spacing: 1px; }
  #poster-actions { display: flex; gap: 12px; margin-top: 16px; }

  /* Progress dots */
  .swiper-pagination-bullet { background: var(--coral) !important; }

  /* Fade in animation */
  .swiper-slide-active .fade-in { animation: fadeUp .6s ease forwards; }
  .fade-in { opacity: 0; }
  @keyframes fadeUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
  .delay-1 { animation-delay: .15s !important; }
  .delay-2 { animation-delay: .3s !important; }
  .delay-3 { animation-delay: .45s !important; }
  .delay-4 { animation-delay: .6s !important; }

  /* Scrollable slides */
  .slide-scroll { overflow-y: auto; justify-content: flex-start; padding-top: 60px; }
</style>
</head>
<body>

<!-- ======= MODAL ======= -->
<div class="modal-overlay" id="modal">
  <div class="modal-card">
    <div class="modal-emoji" id="modal-emoji">ğŸ“Š</div>
    <div class="modal-title" id="modal-title">çœŸå®æ•°æ®</div>
    <div class="modal-stat" id="modal-stat"></div>
    <div class="modal-desc" id="modal-desc"></div>
    <div class="modal-bar"><div class="modal-bar-fill" id="modal-bar-fill" style="width:0%"></div></div>
  </div>
</div>

<!-- ======= POSTER OVERLAY ======= -->
<div id="poster-overlay">
  <div id="poster-card">
    <div class="poster-logo">GUANGDONG YOUTH SURVEY 2025</div>
    <div class="poster-title">2025ï¼Œä½ è¿˜ç›¸ä¿¡å©šå§»å—ï¼Ÿ</div>
    <div class="poster-type" id="poster-type-label">æ¹¾åŒºç†æ€§æ´¾</div>
    <div class="poster-desc" id="poster-desc-label">ä½ æ¸…é†’åœ°çœ‹è§äº†å©šå§»çš„æˆæœ¬ï¼Œä¹Ÿæ²¡æœ‰æ”¾å¼ƒå¯¹çˆ±çš„æœŸå¾…ã€‚</div>
    <div class="poster-qr">
      <svg width="64" height="64" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="1" width="7" height="7" rx="1" fill="none" stroke="#333" stroke-width="1"/>
        <rect x="3" y="3" width="3" height="3" fill="#333"/>
        <rect x="13" y="1" width="7" height="7" rx="1" fill="none" stroke="#333" stroke-width="1"/>
        <rect x="15" y="3" width="3" height="3" fill="#333"/>
        <rect x="1" y="13" width="7" height="7" rx="1" fill="none" stroke="#333" stroke-width="1"/>
        <rect x="3" y="15" width="3" height="3" fill="#333"/>
        <rect x="13" y="11" width="2" height="2" fill="#333"/>
        <rect x="15" y="13" width="2" height="2" fill="#333"/>
        <rect x="13" y="15" width="2" height="2" fill="#333"/>
        <rect x="15" y="17" width="2" height="2" fill="#333"/>
        <rect x="17" y="11" width="2" height="2" fill="#333"/>
        <rect x="19" y="13" width="2" height="2" fill="#333"/>
        <rect x="17" y="15" width="2" height="2" fill="#333"/>
        <rect x="9" y="1" width="2" height="2" fill="#333"/>
        <rect x="11" y="3" width="2" height="2" fill="#333"/>
        <rect x="9" y="5" width="2" height="2" fill="#333"/>
        <rect x="11" y="7" width="2" height="2" fill="#333"/>
        <rect x="9" y="9" width="2" height="2" fill="#333"/>
        <rect x="1" y="9" width="2" height="2" fill="#333"/>
        <rect x="3" y="11" width="2" height="2" fill="#333"/>
        <rect x="5" y="9" width="2" height="2" fill="#333"/>
        <rect x="7" y="11" width="2" height="2" fill="#333"/>
        <rect x="1" y="11" width="2" height="2" fill="#333"/>
        <rect x="5" y="13" width="2" height="2" fill="#333"/>
        <rect x="7" y="15" width="2" height="2" fill="#333"/>
        <rect x="11" y="11" width="2" height="2" fill="#333"/>
        <rect x="11" y="13" width="2" height="2" fill="#333"/>
        <rect x="11" y="15" width="2" height="2" fill="#333"/>
      </svg>
    </div>
    <div class="poster-footer">412ä½å¹¿ä¸œå¹´è½»äººçš„çœŸå®é€‰æ‹© Â· 2025è°ƒç ”æŠ¥å‘Š</div>
  </div>
  <div id="poster-actions">
    <button class="btn btn-primary btn-sm" onclick="savePoster()">ä¿å­˜å›¾ç‰‡</button>
    <button class="btn btn-outline btn-sm" style="color:#fff;border-color:#fff" onclick="closePoster()">å…³é—­</button>
  </div>
</div>

<!-- ======= SWIPER ======= -->
<div class="swiper" id="mySwiper">
  <div class="swiper-wrapper">

    <!-- â•â• PAGE 1 Â· COVER â•â• -->
    <div class="swiper-slide" id="slide-1">
      <div class="cover-deco"></div>
      <div class="cover-year fade-in">2025 Â· å¹¿ä¸œé’å¹´å©šæ‹è§‚è°ƒç ”æŠ¥å‘Š</div>
      <div class="cover-main fade-in delay-1">
        2025ï¼Œä½ è¿˜ç›¸ä¿¡<br>å©šå§»å—<span class="q-mark">ï¼Ÿ</span>
      </div>
      <p class="cover-sub fade-in delay-2">412ä½å¹¿ä¸œå¹´è½»äººçš„<br>çœŸå®é€‰æ‹©ä¸å›°å¢ƒ</p>
      <div class="cover-divider fade-in delay-2"></div>
      <div class="cover-btns fade-in delay-3">
        <button class="btn btn-primary" onclick="setType('single')">ğŸ’¡ æˆ‘æ˜¯å•èº«ï¼Œçœ‹çœ‹æœªæ¥</button>
        <button class="btn btn-secondary" onclick="setType('couple')">ğŸ’‘ æˆ‘åœ¨æ‹çˆ±ï¼Œæµ‹æµ‹é€‚é…åº¦</button>
      </div>
      <div class="cover-footer fade-in delay-4">
        <span>åŸºäºçœŸå®é—®å·æ•°æ®</span>
        <span>N=412</span>
      </div>
      <span class="page-num">01 / 16</span>
    </div>

    <!-- â•â• PAGE 2 Â· ROLE â•â• -->
    <div class="swiper-slide" id="slide-2">
      <span class="page-num">02 / 16</span>
      <div class="page-label fade-in">ä½ çš„æ•…äº‹</div>
      <div class="role-card fade-in delay-1">
        <div class="role-avatar">ğŸ§‘â€ğŸ’¼</div>
        <p class="role-text" id="role-text">
          ä½  <em>28å²</em>ï¼Œåœ¨å¹¿å·å·¥ä½œ5å¹´ï¼Œæœˆå…¥ <em>1.2ä¸‡</em>ï¼Œç§Ÿä½åœ¨åŸä¸­æ‘é™„è¿‘ã€‚<br><br>
          çˆ¶æ¯å¼€å§‹å‚¬å©šï¼Œä½†ä½ çœ‹ç€é“¶è¡Œå¡ä½™é¢å’Œæˆ¿ä»·ï¼Œ<em>é™·å…¥äº†æ²‰é»˜...</em>
        </p>
      </div>
      <div class="swipe-hint fade-in delay-2">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M5 15l7-7 7 7"/></svg>
        ä¸Šæ»‘å¼€å§‹ä½ çš„é€‰æ‹©
      </div>
    </div>

    <!-- â•â• PAGE 3 Â· CHOICE 1 Â· HOUSE â•â• -->
    <div class="swiper-slide" id="slide-3">
      <span class="page-num">03 / 16</span>
      <div class="page-label fade-in">ç¬¬ä¸€å…³ Â· å©šæˆ¿ä¹‹å›°</div>
      <div class="scene-card fade-in delay-1">
        <div class="scene-icon">ğŸ </div>
        <p class="scene-text">å‘¨æœ«ä½ ä»¬å»çœ‹æˆ¿ï¼Œç›®æ ‡å°åŒºçš„<strong>è€ç ´å°</strong>é¦–ä»˜è¦<strong>80ä¸‡</strong>ï¼Œæœˆä¾›<strong>1.2ä¸‡</strong>ã€‚é”€å”®è¯´"å†ä¸ä¹°å°±æ¶¨äº†"...</p>
      </div>
      <div class="choices fade-in delay-2" id="choices-3">
        <button class="choice-btn a" onclick="makeChoice(3,'A',42,'42%çš„äººå’¬ç‰™é€‰äº†A','42%','æ·±åœ³æˆ¿ä»·æ”¶å…¥æ¯”36.3å¹´ï¼Œå¹¿å·17.9å¹´ã€‚è¿™æ„å‘³ç€ä¸åƒä¸å–ä¹°æˆ¿ï¼Œéœ€è¦æ•´æ•´ä¸€ä»£äººã€‚','42')">
          <div class="choice-letter">A</div>
          <div class="choice-text">å’¬å’¬ç‰™ä¹°ï¼Œå†è‹¦ä¹Ÿè¦æœ‰ä¸ªå®¶</div>
        </button>
        <button class="choice-btn b" onclick="makeChoice(3,'B',42,'42%çš„äººå’¬ç‰™é€‰äº†A','42%','æ·±åœ³æˆ¿ä»·æ”¶å…¥æ¯”36.3å¹´ï¼Œå¹¿å·17.9å¹´ã€‚è¿™æ„å‘³ç€ä¸åƒä¸å–ä¹°æˆ¿ï¼Œéœ€è¦æ•´æ•´ä¸€ä»£äººã€‚','42')">
          <div class="choice-letter">B</div>
          <div class="choice-text">é™ä½æ ‡å‡†ï¼Œé€‰éƒŠåŒºæˆ–å°åŸå¸‚</div>
        </button>
        <button class="choice-btn c" onclick="makeChoice(3,'C',42,'42%çš„äººå’¬ç‰™é€‰äº†A','42%','æ·±åœ³æˆ¿ä»·æ”¶å…¥æ¯”36.3å¹´ï¼Œå¹¿å·17.9å¹´ã€‚è¿™æ„å‘³ç€ä¸åƒä¸å–ä¹°æˆ¿ï¼Œéœ€è¦æ•´æ•´ä¸€ä»£äººã€‚','42')">
          <div class="choice-letter">C</div>
          <div class="choice-text">å…ˆç§Ÿæˆ¿ç»“å©šï¼Œæ”’å¤Ÿäº†å†è¯´</div>
        </button>
      </div>
    </div>

    <!-- â•â• PAGE 4 Â· CHOICE 2 Â· CHILD â•â• -->
    <div class="swiper-slide" id="slide-4">
      <span class="page-num">04 / 16</span>
      <div class="page-label fade-in">ç¬¬äºŒå…³ Â· è‚²å„¿ä¹‹å›°</div>
      <div class="scene-card fade-in delay-1">
        <div class="scene-icon">ğŸ‘¶</div>
        <p class="scene-text">çˆ¶æ¯å‚¬ä½ ä»¬èµ¶ç´§ç”Ÿï¼Œä½†ä½ ä»¬ç®—äº†ç®—ï¼š<strong>0-3å²æ‰˜è‚²çº¦15ä¸‡/å¹´</strong>ï¼Œå…¬å¸æ­£åœ¨è£å‘˜ï¼Œæ‰˜å„¿æ‰€è¦æ’é˜Ÿ2å¹´...</p>
      </div>
      <div class="choices fade-in delay-2" id="choices-4">
        <button class="choice-btn a" onclick="makeChoice(4,'A',71,'70.9%è®¤ä¸ºè‚²å„¿æ”¯æŒä¸è¶³','70.9%','è¶…è¿‡ä¸ƒæˆå—è®¿è€…è®¤ä¸ºï¼Œç°æœ‰è‚²å„¿æ”¯æŒæ”¿ç­–æ— æ³•è¦†ç›–å®é™…éœ€æ±‚ã€‚æ²¡æœ‰äººæ˜¯ä¸æƒ³è¦å­©å­ï¼Œåªæ˜¯ä¸æ•¢è¦ã€‚','71')">
          <div class="choice-letter">A</div>
          <div class="choice-text">å…ˆç»“å©šï¼Œç”Ÿå­©å­çš„äº‹ä»¥åå†è¯´</div>
        </button>
        <button class="choice-btn b" onclick="makeChoice(4,'B',71,'70.9%è®¤ä¸ºè‚²å„¿æ”¯æŒä¸è¶³','70.9%','è¶…è¿‡ä¸ƒæˆå—è®¿è€…è®¤ä¸ºï¼Œç°æœ‰è‚²å„¿æ”¯æŒæ”¿ç­–æ— æ³•è¦†ç›–å®é™…éœ€æ±‚ã€‚æ²¡æœ‰äººæ˜¯ä¸æƒ³è¦å­©å­ï¼Œåªæ˜¯ä¸æ•¢è¦ã€‚','71')">
          <div class="choice-letter">B</div>
          <div class="choice-text">ç­‰å·¥ä½œå’Œæ”¿ç­–éƒ½ç¨³å®šäº†å†ç”Ÿ</div>
        </button>
        <button class="choice-btn c" onclick="makeChoice(4,'C',71,'70.9%è®¤ä¸ºè‚²å„¿æ”¯æŒä¸è¶³','70.9%','è¶…è¿‡ä¸ƒæˆå—è®¿è€…è®¤ä¸ºï¼Œç°æœ‰è‚²å„¿æ”¯æŒæ”¿ç­–æ— æ³•è¦†ç›–å®é™…éœ€æ±‚ã€‚æ²¡æœ‰äººæ˜¯ä¸æƒ³è¦å­©å­ï¼Œåªæ˜¯ä¸æ•¢è¦ã€‚','71')">
          <div class="choice-letter">C</div>
          <div class="choice-text">è‚²å„¿é—®é¢˜æ²¡è§£å†³ï¼Œåšå†³ä¸ç”Ÿ</div>
        </button>
      </div>
    </div>

    <!-- â•â• PAGE 5 Â· CHOICE 3 Â· WORK â•â• -->
    <div class="swiper-slide" id="slide-5">
      <span class="page-num">05 / 16</span>
      <div class="page-label fade-in">ç¬¬ä¸‰å…³ Â· æ—¶é—´ä¹‹å›°</div>
      <div class="scene-card fade-in delay-1">
        <div class="scene-icon">ğŸ’¼</div>
        <p class="scene-text">æ·±å¤œ11ç‚¹ï¼Œä½ åˆšå¼€å®Œä¼šã€‚ä¼´ä¾£å‘æ¶ˆæ¯ï¼š"ä½ è¯´çš„ç»“å©šè®¡åˆ’ï¼Œåˆ°åº•ä»€ä¹ˆæ—¶å€™ï¼Ÿ"ä½ ç›¯ç€å±å¹•ï¼Œ<strong>ä¸çŸ¥é“æ€ä¹ˆå›</strong>...</p>
      </div>
      <div class="choices fade-in delay-2" id="choices-5">
        <button class="choice-btn a" onclick="makeChoice(5,'A',0,'ä½ çš„é€‰æ‹©ä¸æ•°æ®','â€”','996æ–‡åŒ–è®©å¹¿ä¸œé’å¹´å¹³å‡æ¯å¤©æœ‰æ•ˆæ‹çˆ±æ—¶é—´ä¸è¶³2å°æ—¶ã€‚æ—¶é—´çš„è´«å›°ï¼Œæ­£åœ¨æ‚„æ‚„æ¶ˆè€—æ„Ÿæƒ…çš„å­˜é‡ã€‚','0',true)">
          <div class="choice-letter">A</div>
          <div class="choice-text">å¸Œæœ›å·¥ä½œåˆ«å¤ªç´¯äº†å†ç»“å©š</div>
        </button>
        <button class="choice-btn b" onclick="makeChoice(5,'B',0,'ä½ çš„é€‰æ‹©ä¸æ•°æ®','â€”','996æ–‡åŒ–è®©å¹¿ä¸œé’å¹´å¹³å‡æ¯å¤©æœ‰æ•ˆæ‹çˆ±æ—¶é—´ä¸è¶³2å°æ—¶ã€‚æ—¶é—´çš„è´«å›°ï¼Œæ­£åœ¨æ‚„æ‚„æ¶ˆè€—æ„Ÿæƒ…çš„å­˜é‡ã€‚','0',true)">
          <div class="choice-letter">B</div>
          <div class="choice-text">ä¸€è¾¹æ‹¼äº‹ä¸šï¼Œä¸€è¾¹æ…¢æ…¢ç­¹å¤‡</div>
        </button>
        <button class="choice-btn c" onclick="makeChoice(5,'C',0,'ä½ çš„é€‰æ‹©ä¸æ•°æ®','â€”','996æ–‡åŒ–è®©å¹¿ä¸œé’å¹´å¹³å‡æ¯å¤©æœ‰æ•ˆæ‹çˆ±æ—¶é—´ä¸è¶³2å°æ—¶ã€‚æ—¶é—´çš„è´«å›°ï¼Œæ­£åœ¨æ‚„æ‚„æ¶ˆè€—æ„Ÿæƒ…çš„å­˜é‡ã€‚','0',true)">
          <div class="choice-letter">C</div>
          <div class="choice-text">å…ˆæå¥½æ™‹å‡ï¼Œå©šäº‹æš‚æ—¶ç¼“ä¸€ç¼“</div>
        </button>
      </div>
    </div>

    <!-- â•â• PAGE 6 Â· RESULT â•â• -->
    <div class="swiper-slide" id="slide-6">
      <span class="page-num">06 / 16</span>
      <div class="page-label fade-in">ä½ çš„å©šæ‹æ€§æ ¼</div>
      <div class="result-badge fade-in delay-1" id="result-badge">è°ƒç ”ç»“æœ</div>
      <div class="result-type fade-in delay-1" id="result-type">æ¹¾åŒºç†æ€§æ´¾</div>
      <p class="result-desc fade-in delay-2" id="result-desc">ä½ æ¸…é†’åœ°çœ‹è§äº†å©šå§»çš„æˆæœ¬ï¼Œä¹Ÿæ²¡æœ‰æ”¾å¼ƒå¯¹çˆ±çš„æœŸå¾…ã€‚åœ¨å‹åŠ›é¢å‰ï¼Œä½ é€‰æ‹©ç­‰å¾…æ—¶æœºï¼Œè€Œéä»“ä¿ƒå‰è¡Œã€‚è¿™ç§å†·é™ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§æ™ºæ…§ã€‚</p>
      <div class="result-traits fade-in delay-3" id="result-traits">
        <span class="trait-tag">ç†æ€§åŠ¡å®</span>
        <span class="trait-tag">è°¨æ…è§„åˆ’</span>
        <span class="trait-tag">ç»æµæ•æ„Ÿ</span>
      </div>
      <div style="margin-top:24px" class="fade-in delay-4">
        <button class="btn btn-primary btn-full" onclick="goToSlide(6)">æŸ¥çœ‹çœŸå®å›°å¢ƒæ•°æ® â†’</button>
      </div>
    </div>

    <!-- â•â• PAGE 7 Â· MARRIAGE RATE CHART â•â• -->
    <div class="swiper-slide" id="slide-7">
      <span class="page-num">07 / 16</span>
      <div class="page-label fade-in">ç»“å©šç‡æ•°æ®</div>
      <div class="data-highlight fade-in delay-1" style="margin-bottom:12px">
        <div class="data-num">102<span style="font-size:20px;color:#aaa">ä¸‡å¯¹</span></div>
        <div class="data-unit">2024å¹´å¹¿ä¸œç»“å©šç™»è®°äººæ•°</div>
      </div>
      <div class="chart-wrap fade-in delay-2" id="chart-7"></div>
      <p class="chart-note fade-in delay-3">ç‚¹å‡»æ•°æ®ç‚¹æŸ¥çœ‹æ³¨é‡Š Â· æ•°æ®æ¥æºï¼šæ°‘æ”¿éƒ¨</p>
    </div>

    <!-- â•â• PAGE 8 Â· HOUSING PRESSURE â•â• -->
    <div class="swiper-slide slide-scroll" id="slide-8" style="padding-top:50px">
      <span class="page-num">08 / 16</span>
      <div class="page-label fade-in">æˆ¿ä»·å‹åŠ›æŒ‡æ•°</div>
      <div class="chart-wrap fade-in delay-1" id="chart-8" style="height:440px"></div>
      <p class="chart-note fade-in delay-2">æ·±åœ³36å¹´ï¼Œå¹¿å·18å¹´ï¼Œæ¸…è¿œ6.5å¹´ã€‚<br>é—®é¢˜æ˜¯ï¼š<strong>æ¸…è¿œæ²¡æœ‰ä½ çš„å·¥ä½œï¼Œæ·±åœ³æ²¡æœ‰ä½ çš„å®¶</strong></p>
    </div>

    <!-- â•â• PAGE 9 Â· CHILDCARE â•â• -->
    <div class="swiper-slide" id="slide-9">
      <span class="page-num">09 / 16</span>
      <div class="page-label fade-in">è‚²å„¿æ”¯æŒæ»¡æ„åº¦</div>
      <div class="data-highlight fade-in delay-1">
        <div class="data-num">70.9<span style="font-size:20px;color:#aaa">%</span></div>
        <div class="data-unit">è®¤ä¸ºè‚²å„¿æ”¯æŒä¸è¶³ï¼ˆä¸¥é‡+ä¸å¤ªè¶³å¤Ÿï¼‰</div>
      </div>
      <div class="chart-wrap fade-in delay-2" id="chart-9" style="height:200px"></div>
      <p class="chart-note fade-in delay-3">0-3å²æ‰˜è‚²çº¦15ä¸‡/å¹´ï¼Œè€Œå¹³å‡ç»“å©šå¹´é¾„å·²æ¨è¿Ÿè‡³<strong>28.7å²</strong><br>ç”Ÿè‚²çª—å£æ­£åœ¨è¢«ç»æµå‹åŠ›ä¸æ–­å‹ç¼©</p>
    </div>

    <!-- â•â• PAGE 10 Â· HOUSING ATTITUDE â•â• -->
    <div class="swiper-slide" id="slide-10">
      <span class="page-num">10 / 16</span>
      <div class="page-label fade-in">å©šå‰ä¹°æˆ¿æ€åº¦</div>
      <div class="chart-wrap fade-in delay-1" id="chart-10" style="height:220px"></div>
      <p class="result-desc fade-in delay-2" style="text-align:center;margin-top:16px;font-size:15px;font-family:var(--serif);line-height:2;color:#333">
        å˜´ä¸Šè¯´ç€<span class="highlight">"ç§Ÿæˆ¿ä¹Ÿèƒ½ç»“å©š"</span><br>
        å¿ƒé‡Œè¿˜æ˜¯æƒ³è¦<span class="teal-text">ä¸€ä¸ªå±äºè‡ªå·±çš„å®¶</span>
      </p>
      <p class="chart-note fade-in delay-3" style="margin-top:12px">42%è®¤ä¸ºå©šå‰å¿…é¡»æœ‰æˆ¿ï¼Œ78.2%è®¤ä¸ºæˆ¿å­æ˜¯å©šå§»é‡è¦æ¡ä»¶</p>
    </div>

    <!-- â•â• PAGE 11 Â· ECONOMIC STRUGGLE â•â• -->
    <div class="swiper-slide struggle-page" id="slide-11">
      <span class="page-num">11 / 16</span>
      <div class="struggle-num">å›°</div>
      <div class="page-label fade-in">ç»æµä¹‹å›°</div>
      <div class="struggle-quote fade-in delay-1">
        å·¥èµ„æ¶¨äº† <span class="red">5%</span><br>
        æˆ¿ä»·æ¶¨äº† <span class="red">15%</span><br>
        è‚²å„¿æˆæœ¬æ¶¨äº† <span class="red">20%</span>
      </div>
      <div class="fade-in delay-2" style="width:100%">
        <div class="stat-row"><div class="stat-big">5%</div><div class="stat-label">å¹´å‡å·¥èµ„å¢å¹…</div></div>
        <div class="vs-arrow">â†“ VS â†‘</div>
        <div class="stat-row"><div class="stat-big" style="color:var(--coral)">36x</div><div class="stat-label">æ·±åœ³æˆ¿ä»·æ˜¯æœˆè–ªçš„36å€</div></div>
      </div>
      <p class="sub-title fade-in delay-3">æ•°å­—çš„å‰ªåˆ€å·®ï¼Œå‰ªæ–­çš„æ˜¯å¹´è½»äººå¯¹æœªæ¥çš„æƒ³è±¡</p>
      <div class="swipe-hint fade-in delay-3">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M5 15l7-7 7 7"/></svg>
      </div>
    </div>

    <!-- â•â• PAGE 12 Â· STRUCTURAL STRUGGLE â•â• -->
    <div class="swiper-slide" id="slide-12">
      <span class="page-num">12 / 16</span>
      <div class="struggle-num" style="color:rgba(78,205,196,.08)">å·®</div>
      <div class="page-label fade-in">ç»“æ„ä¹‹å›°</div>
      <div class="struggle-quote fade-in delay-1">
        å†œæ‘ï¼š<span class="red">ç”·å¤šå¥³å°‘</span><br>
        åŸå¸‚ï¼š<span style="color:var(--teal)">å¥³å¤šç”·å°‘</span><br>
        ä¸­é—´éš”ç€<span class="red">200å…¬é‡Œ</span><br>å’Œä¸€å¥—<span class="red">æˆ¿é¦–ä»˜</span>
      </div>
      <div class="fade-in delay-2" style="width:100%;background:#f8f8f8;border-radius:14px;padding:16px 18px">
        <p style="font-size:13px;color:#555;line-height:2">
          ğŸ“ é«˜å­¦å†å¥³æ€§æ›´é›†ä¸­åœ¨å¤§åŸå¸‚<br>
          ğŸ“ é«˜å­¦å†ç”·æ€§é¢ä¸´å©šé…å‹åŠ›åŠ å‰§<br>
          ğŸ“ é˜¶å±‚å›ºåŒ–ä½¿è·¨å±‚å©šé…æ„ˆå‘å›°éš¾<br>
          ğŸ“ å¹¿æ·±ä¸¤åœ°å©šé…æ¯”ä¾‹å¤±è¡¡æœ€ä¸ºä¸¥é‡
        </p>
      </div>
    </div>

    <!-- â•â• PAGE 13 Â· TIME STRUGGLE â•â• -->
    <div class="swiper-slide struggle-page" id="slide-13">
      <span class="page-num">13 / 16</span>
      <div class="struggle-num">å¿™</div>
      <div class="page-label fade-in">æ—¶é—´ä¹‹å›°</div>
      <div class="struggle-quote fade-in delay-1">
        996 æ¦¨å¹²äº†<br>æ‹çˆ±çš„æ—¶é—´<br>
        35å²å±æœº<br>å‹è¿‡äº†<span class="red">ç»“å©šçš„å¿µå¤´</span>
      </div>
      <div class="fade-in delay-2" style="width:100%">
        <div class="data-highlight">
          <div class="data-num">2h</div>
          <div class="data-unit">å¹¿ä¸œé’å¹´æ¯æ—¥æœ‰æ•ˆæ‹çˆ±æ—¶é—´ï¼ˆå‡å€¼ï¼‰</div>
        </div>
      </div>
      <p class="sub-title fade-in delay-3">å½“ä¸‹ç­å›å®¶å·²æ˜¯æ·±å¤œï¼Œ<br>è¿è°ˆæ‹çˆ±çš„æ—¶é—´éƒ½è¢«å·¥ä½œå·èµ°äº†</p>
    </div>

    <!-- â•â• PAGE 14 Â· TURN â•â• -->
    <div class="swiper-slide" id="slide-14">
      <span class="page-num">14 / 16</span>
      <p class="turn-title fade-in">è¯»å®Œè¿™äº›æ•°æ®<br>ä½ çš„é€‰æ‹©æ˜¯...</p>
      <div class="turn-btns fade-in delay-1">
        <button class="btn btn-primary btn-full" onclick="showTurnResult('marry')">ğŸ’ é€‰æ‹©ç»“å©š</button>
        <button class="btn btn-secondary btn-full" onclick="showTurnResult('single')">ğŸŒ¿ é€‰æ‹©ä¸å©š / æš‚ç¼“</button>
      </div>
      <div class="turn-result" id="turn-result">
        <p class="turn-result-text" id="turn-result-text"></p>
        <div style="margin-top:16px">
          <button class="btn btn-outline btn-sm btn-full" style="color:#fff;border-color:rgba(255,255,255,.4)" onclick="goToSlide(14)">ç»§ç»­é˜…è¯» â†’</button>
        </div>
      </div>
    </div>

    <!-- â•â• PAGE 15 Â· SUMMARY â•â• -->
    <div class="swiper-slide" id="slide-15">
      <span class="page-num">15 / 16</span>
      <div class="summary-circle fade-in">
        <div class="summary-icon">ğŸŒº</div>
      </div>
      <p class="summary-text fade-in delay-1">
        æ— è®º<span class="cr">å©š</span>ä¸<span class="tl">ä¸å©š</span><br>
        æ„¿ä½ åœ¨å¹¿ä¸œè¿™ç‰‡åœŸåœ°<br>
        éƒ½èƒ½æ‹¥æœ‰<br>
        <span class="cr">é€‰æ‹©çš„åº•æ°”</span>
      </p>
    </div>

    <!-- â•â• PAGE 16 Â· END â•â• -->
    <div class="swiper-slide" id="slide-16">
      <span class="page-num">16 / 16</span>
      <div style="width:100%;text-align:center">
        <div style="font-size:48px;margin-bottom:20px" class="fade-in">ğŸŒ¸</div>
        <p class="end-quote fade-in delay-1">
          æ„¿æ¯ä¸€ä¸ªåœ¨å¹¿ä¸œæ‰“æ‹¼çš„å¹´è½»äºº<br>
          éƒ½èƒ½æ‹¥æœ‰<strong>é€‰æ‹©ç»“å©šçš„å‹‡æ°”</strong><br>
          <span class="line2">å’Œä¸ç»“å©šä¹Ÿèƒ½å¹¸ç¦çš„åº•æ°”</span>
        </p>
        <div class="end-btns fade-in delay-2">
          <button class="btn btn-primary btn-full" onclick="showPoster()">ğŸ–¼ï¸ ç”Ÿæˆæˆ‘çš„ä¸“å±æµ·æŠ¥</button>
          <button class="btn btn-outline btn-full" onclick="goToSlide(6)">ğŸ“Š æŸ¥çœ‹å®Œæ•´æ•°æ®</button>
          <button class="btn btn-outline btn-full" onclick="resetTest()">ğŸ”„ é‡æ–°æµ‹è¯•</button>
        </div>
        <p class="brand fade-in delay-3">2025 GUANGDONG YOUTH SURVEY Â· N=412</p>
      </div>
    </div>

  </div><!-- /swiper-wrapper -->
</div><!-- /swiper -->

<script>
// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let userType = 'single';
let choices  = { 3: null, 4: null, 5: null };
let resultType = '';
let swiper;

// â”€â”€â”€ INIT SWIPER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
swiper = new Swiper('#mySwiper', {
  direction: 'vertical',
  speed: 500,
  allowTouchMove: true,
  mousewheel: true,
  on: {
    slideChangeTransitionEnd: function() {
      const idx = this.activeIndex;
      initChart(idx + 1);
    }
  }
});

// Prevent swipe on scroll slides
document.querySelectorAll('.slide-scroll').forEach(el => {
  el.addEventListener('touchmove', e => e.stopPropagation(), { passive: true });
});

// â”€â”€â”€ NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goToSlide(pageNum) { swiper.slideTo(pageNum - 1, 500); }

// â”€â”€â”€ USER TYPE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setType(type) {
  userType = type;
  updateRoleText();
  goToSlide(2);
}

function updateRoleText() {
  const el = document.getElementById('role-text');
  if (userType === 'single') {
    document.querySelector('#slide-2 .role-avatar').textContent = 'ğŸ§‘â€ğŸ’¼';
    el.innerHTML = `ä½  <em>28å²</em>ï¼Œåœ¨å¹¿å·å·¥ä½œ5å¹´ï¼Œæœˆå…¥ <em>1.2ä¸‡</em>ï¼Œç§Ÿä½åœ¨åŸä¸­æ‘é™„è¿‘ã€‚<br><br>çˆ¶æ¯å¼€å§‹å‚¬å©šï¼Œä½†ä½ çœ‹ç€é“¶è¡Œå¡ä½™é¢å’Œæˆ¿ä»·ï¼Œ<em>é™·å…¥äº†æ²‰é»˜...</em>`;
  } else {
    document.querySelector('#slide-2 .role-avatar').textContent = 'ğŸ’‘';
    el.innerHTML = `ä½ ä»¬æ‹çˆ± <em>3å¹´</em>ï¼Œæ„Ÿæƒ…ç¨³å®šã€‚<br><br>ä½†è°ˆåˆ°ç»“å©šï¼Œæˆ¿å­ã€å½©ç¤¼ã€è‚²å„¿åƒä¸‰åº§å¤§å±±æ¨ªåœ¨ä¸­é—´ã€‚ä½ ä»¬ä¸æ˜¯ä¸çˆ±ï¼Œåªæ˜¯<em>ä¸æ•¢æƒ³æœªæ¥...</em>`;
  }
}

// â”€â”€â”€ CHOICES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function makeChoice(page, letter, statNum, title, stat, desc, barPct, noStat) {
  choices[page] = letter;
  // Highlight selected
  document.querySelectorAll(`#choices-${page} .choice-btn`).forEach(b => b.classList.remove('selected'));
  event.currentTarget.classList.add('selected');
  // Show modal
  const modal = document.getElementById('modal');
  document.getElementById('modal-emoji').textContent = page === 3 ? 'ğŸ ' : page === 4 ? 'ğŸ‘¶' : 'ğŸ’¼';
  document.getElementById('modal-title').textContent = title;
  document.getElementById('modal-stat').textContent = noStat ? '' : stat;
  document.getElementById('modal-desc').textContent = desc;
  modal.classList.add('show');
  setTimeout(() => {
    document.getElementById('modal-bar-fill').style.width = barPct + '%';
  }, 200);
  // Auto advance
  setTimeout(() => {
    modal.classList.remove('show');
    document.getElementById('modal-bar-fill').style.width = '0%';
    if (page < 5) {
      goToSlide(page + 1);
    } else {
      calcResult();
      goToSlide(6);
    }
  }, 2500);
}

// â”€â”€â”€ RESULT CALC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function calcResult() {
  const vals = Object.values(choices).filter(Boolean);
  const aCount = vals.filter(v => v === 'A').length;
  const bCount = vals.filter(v => v === 'B').length;
  const cCount = vals.filter(v => v === 'C').length;
  let type, desc, traits, badge;
  if (aCount >= bCount && aCount >= cCount) {
    type = 'ä¼ ç»ŸåŠ¡å®å‹'; badge = 'ğŸ¡ ä¼ ç»ŸåŠ¡å®å‹';
    desc = 'ä½ ç›¸ä¿¡å©šå§»æ˜¯äººç”Ÿå¿…ç»çš„è·¯ï¼Œä¹Ÿæ„¿æ„ä¸ºäº†çˆ±æ‰¿æ‹…å·¨å¤§çš„ç»æµå‹åŠ›ã€‚è¿™ä»½å‹‡æ°”è®©äººæ•¬ä½©ï¼Œä½†è®°å¾—é‡åŠ›è€Œè¡Œâ€”â€”çˆ±æƒ…ä¸è¯¥å˜æˆç”Ÿæ´»çš„é‡è´Ÿã€‚';
    traits = ['è´£ä»»æ„Ÿå¼º', 'å®¶åº­ä¼˜å…ˆ', 'æ•¢äºæ‹…å½“'];
    resultType = 'ä¼ ç»ŸåŠ¡å®å‹';
  } else if (cCount >= aCount && cCount >= bCount) {
    type = 'æ–°ä¸–ä»£ç‹¬ç«‹æ´¾'; badge = 'ğŸŒ¿ æ–°ä¸–ä»£ç‹¬ç«‹æ´¾';
    desc = 'ä½ å¯¹å©šå§»æœ‰æ¸…é†’çš„åˆ¤æ–­ï¼šåœ¨æ¡ä»¶ä¸æˆç†Ÿæ—¶ï¼Œæ‹’ç»å°†å°±ã€‚ä½ æ›´åœ¨ä¹è‡ªæˆ‘æˆé•¿å’Œç”Ÿæ´»è´¨é‡ï¼Œè¿™ä¸æ˜¯é€ƒé¿ï¼Œè€Œæ˜¯ä¸€ç§è´Ÿè´£ä»»çš„æ€åº¦ã€‚';
    traits = ['ç‹¬ç«‹è‡ªä¸»', 'è¾¹ç•Œæ¸…æ™°', 'ä¸å°†å°±'];
    resultType = 'æ–°ä¸–ä»£ç‹¬ç«‹æ´¾';
  } else {
    type = 'æ¹¾åŒºç†æ€§æ´¾'; badge = 'ğŸ“Š æ¹¾åŒºç†æ€§æ´¾';
    desc = 'ä½ æ¸…é†’åœ°çœ‹è§äº†å©šå§»çš„æˆæœ¬ï¼Œä¹Ÿæ²¡æœ‰æ”¾å¼ƒå¯¹çˆ±çš„æœŸå¾…ã€‚åœ¨å‹åŠ›é¢å‰ï¼Œä½ é€‰æ‹©ç­‰å¾…æ—¶æœºï¼Œè€Œéä»“ä¿ƒå‰è¡Œã€‚è¿™ç§å†·é™ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§æ™ºæ…§ã€‚';
    traits = ['ç†æ€§åŠ¡å®', 'è°¨æ…è§„åˆ’', 'ç»æµæ•æ„Ÿ'];
    resultType = 'æ¹¾åŒºç†æ€§æ´¾';
  }
  document.getElementById('result-badge').textContent = badge;
  document.getElementById('result-type').textContent = type;
  document.getElementById('result-desc').textContent = desc;
  document.getElementById('result-traits').innerHTML = traits.map(t => `<span class="trait-tag">${t}</span>`).join('');
  // Update poster
  document.getElementById('poster-type-label').textContent = type;
  document.getElementById('poster-desc-label').textContent = desc.substring(0, 40) + '...';
}

// â”€â”€â”€ TURN RESULT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showTurnResult(choice) {
  const el = document.getElementById('turn-result');
  const txt = document.getElementById('turn-result-text');
  if (choice === 'marry') {
    txt.innerHTML = 'ğŸ’ <strong style="color:var(--gold)">æ­å–œä½ ï¼Œæœ‰å‹‡æ°”åšå‡ºè¿™ä¸ªé€‰æ‹©ã€‚</strong><br><br>å©šå§»ä»æ¥ä¸æ˜¯å®Œç¾æ¡ä»¶ä¸‹çš„äº§ç‰©ï¼Œè€Œæ˜¯ä¸¤ä¸ªäººå†³å®šå…±åŒé¢å¯¹ä¸å®Œç¾çš„æ‰¿è¯ºã€‚æ•°æ®æ˜¯æ•°æ®ï¼Œä½ ä»¬çš„æ•…äº‹æ˜¯ä½ ä»¬çš„æ•…äº‹ã€‚';
  } else {
    txt.innerHTML = 'ğŸŒ¿ <strong style="color:var(--teal)">è¿™åŒæ ·å€¼å¾—å°Šé‡ã€‚</strong><br><br>ä¸å©šæˆ–æš‚ç¼“ï¼Œä¸æ˜¯é€ƒé¿ï¼Œæ˜¯å¯¹è‡ªå·±ç”Ÿæ´»æ–¹å¼çš„è´Ÿè´£ã€‚åœ¨è¿™ä¸ªæ—¶ä»£ï¼Œæ¸…é†’åœ°çŸ¥é“è‡ªå·±è¦ä»€ä¹ˆï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§å‹‡æ°”ã€‚';
  }
  el.classList.add('show');
}

// â”€â”€â”€ CHARTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const chartInited = {};
function initChart(page) {
  if (chartInited[page]) return;
  chartInited[page] = true;

  if (page === 7) initChart7();
  if (page === 8) initChart8();
  if (page === 9) initChart9();
  if (page === 10) initChart10();
}

function initChart7() {
  const chart = echarts.init(document.getElementById('chart-7'));
  const data = [
    { year: '2010', val: 160 },
    { year: '2015', val: 155 },
    { year: '2022', val: 115 },
    { year: '2023', val: 130 },
    { year: '2024', val: 102 },
  ];
  const notes = {
    '2015': 'æˆ¿ä»·é£™å‡',
    '2022': 'ç–«æƒ…+ç»æµä¸‹è¡Œ',
    '2024': '00åè¿›å…¥å©šé¾„'
  };
  chart.setOption({
    backgroundColor: 'transparent',
    grid: { left: 40, right: 30, top: 40, bottom: 40 },
    tooltip: {
      trigger: 'item',
      formatter: p => {
        const note = notes[p.name] || '';
        return `<strong>${p.name}å¹´</strong><br>${p.value}ä¸‡å¯¹${note ? '<br>ğŸ“Œ ' + note : ''}`;
      }
    },
    xAxis: {
      type: 'category',
      data: data.map(d => d.year),
      axisLabel: { fontSize: 11, color: '#666' },
      axisLine: { lineStyle: { color: '#ddd' } }
    },
    yAxis: {
      type: 'value', min: 80, max: 180,
      axisLabel: { fontSize: 10, color: '#999', formatter: v => v + 'ä¸‡' },
      splitLine: { lineStyle: { color: '#f0f0f0' } }
    },
    series: [{
      type: 'line',
      data: data.map(d => ({ name: d.year, value: d.val })),
      smooth: true,
      lineStyle: { color: '#FF6B6B', width: 3 },
      itemStyle: {
        color: p => notes[p.name] ? '#FF6B6B' : '#4ECDC4',
        borderWidth: 3, borderColor: '#fff',
        shadowColor: 'rgba(255,107,107,.4)', shadowBlur: 8
      },
      symbolSize: p => notes[p.name] ? 14 : 8,
      areaStyle: { color: { type: 'linear', x: 0, y: 0, x2: 0, y2: 1, colorStops: [{ offset: 0, color: 'rgba(255,107,107,.2)' }, { offset: 1, color: 'rgba(255,107,107,0)' }] } },
      markPoint: {
        data: Object.entries(notes).map(([year, note]) => {
          const item = data.find(d => d.year === year);
          return { coord: [year, item.val], name: note, value: note };
        }),
        label: { fontSize: 9, color: '#fff' },
        itemStyle: { color: '#FF6B6B' },
        symbol: 'pin', symbolSize: 40
      }
    }]
  });
}

function initChart8() {
  const cities = [
    { name: 'æ·±åœ³', val: 36.3, color: '#FF6B6B' },
    { name: 'å¹¿å·', val: 17.9, color: '#FF6B6B' },
    { name: 'æ±•å¤´', val: 14.0, color: '#F7C59F' },
    { name: 'ä¸œè', val: 13.7, color: '#F7C59F' },
    { name: 'ç æµ·', val: 13.0, color: '#F7C59F' },
    { name: 'æ¹›æ±Ÿ', val: 13.0, color: '#F7C59F' },
    { name: 'æ­é˜³', val: 12.1, color: '#F7C59F' },
    { name: 'æ±•å°¾', val: 9.9,  color: '#F7C59F' },
    { name: 'èŒ‚å', val: 9.8,  color: '#F7C59F' },
    { name: 'æ¢…å·', val: 9.5,  color: '#F7C59F' },
    { name: 'è‚‡åº†', val: 9.0,  color: '#F7C59F' },
    { name: 'ä½›å±±', val: 8.2,  color: '#F7C59F' },
    { name: 'æ²³æº', val: 8.1,  color: '#F7C59F' },
    { name: 'æ±Ÿé—¨', val: 7.4,  color: '#4ECDC4' },
    { name: 'æƒ å·', val: 7.3,  color: '#4ECDC4' },
    { name: 'é˜³æ±Ÿ', val: 7.0,  color: '#4ECDC4' },
    { name: 'éŸ¶å…³', val: 6.9,  color: '#4ECDC4' },
    { name: 'äº‘æµ®', val: 6.7,  color: '#4ECDC4' },
    { name: 'æ¸…è¿œ', val: 6.5,  color: '#4ECDC4' },
    { name: 'ä¸­å±±', val: 6.1,  color: '#4ECDC4' },
  ];
  const chart = echarts.init(document.getElementById('chart-8'));
  chart.setOption({
    backgroundColor: 'transparent',
    grid: { left: 52, right: 60, top: 10, bottom: 10 },
    tooltip: { trigger: 'axis', formatter: p => `${p[0].name}ï¼šä¸åƒä¸å–ä¹°æˆ¿éœ€ <strong>${p[0].value}å¹´</strong>` },
    xAxis: { type: 'value', axisLabel: { fontSize: 9, color: '#999', formatter: v => v + 'å¹´' }, splitLine: { lineStyle: { color: '#f0f0f0' } } },
    yAxis: { type: 'category', data: cities.map(c => c.name).reverse(), axisLabel: { fontSize: 11, color: '#555' } },
    series: [{
      type: 'bar',
      data: cities.map(c => ({ value: c.val, itemStyle: { color: c.color, borderRadius: [0, 6, 6, 0] } })).reverse(),
      barMaxWidth: 18,
      label: { show: true, position: 'right', fontSize: 10, color: '#666', formatter: p => p.value + 'å¹´' }
    }]
  });
}

function initChart9() {
  const chart = echarts.init(document.getElementById('chart-9'));
  chart.setOption({
    backgroundColor: 'transparent',
    grid: { left: 80, right: 20, top: 10, bottom: 30 },
    tooltip: { trigger: 'axis' },
    xAxis: { type: 'value', max: 160, axisLabel: { fontSize: 10, color: '#999', formatter: v => v + 'äºº' }, splitLine: { lineStyle: { color: '#f5f5f5' } } },
    yAxis: { type: 'category', data: ['ä¸¥é‡ä¸è¶³', 'ä¸å¤ªè¶³å¤Ÿ', 'åŸºæœ¬è¶³å¤Ÿ', 'æ¯”è¾ƒå……è¶³'], axisLabel: { fontSize: 11, color: '#555' } },
    series: [{
      type: 'bar',
      data: [
        { value: 137, itemStyle: { color: '#FF6B6B', borderRadius: [0, 8, 8, 0] } },
        { value: 155, itemStyle: { color: '#FF9A9A', borderRadius: [0, 8, 8, 0] } },
        { value: 70,  itemStyle: { color: '#4ECDC4', borderRadius: [0, 8, 8, 0] } },
        { value: 50,  itemStyle: { color: '#26A69A', borderRadius: [0, 8, 8, 0] } },
      ],
      barMaxWidth: 22,
      label: { show: true, position: 'right', fontSize: 11, color: '#666', formatter: p => {
        const pcts = ['33.3%','37.6%','17.0%','12.1%'];
        return pcts[p.dataIndex];
      }}
    }]
  });
}

function initChart10() {
  const chart = echarts.init(document.getElementById('chart-10'));
  chart.setOption({
    backgroundColor: 'transparent',
    tooltip: { trigger: 'item', formatter: p => `${p.name}<br>${p.value}äººï¼ˆ${p.percent}%ï¼‰` },
    legend: { bottom: 0, itemWidth: 10, itemHeight: 10, textStyle: { fontSize: 10, color: '#666' } },
    series: [{
      type: 'pie', radius: ['40%', '72%'], center: ['50%', '42%'],
      padAngle: 3, itemStyle: { borderRadius: 6 },
      label: { show: false },
      data: [
        { name: 'ç»å¯¹å¿…è¦', value: 173, itemStyle: { color: '#FF6B6B' } },
        { name: 'é‡è¦ä½†éç¡¬æ€§', value: 149, itemStyle: { color: '#F7C59F' } },
        { name: 'ç§Ÿæˆ¿å³å¯', value: 59, itemStyle: { color: '#4ECDC4' } },
        { name: 'å®Œå…¨ä¸éœ€è¦', value: 31, itemStyle: { color: '#B2EBF2' } },
      ],
      emphasis: { scale: true, scaleSize: 8 }
    }]
  });
}

// â”€â”€â”€ POSTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPoster() {
  document.getElementById('poster-overlay').classList.add('show');
}
function closePoster() {
  document.getElementById('poster-overlay').classList.remove('show');
}
async function savePoster() {
  const card = document.getElementById('poster-card');
  try {
    const canvas = await html2canvas(card, { scale: 2, useCORS: true, backgroundColor: null });
    const link = document.createElement('a');
    link.download = 'å¹¿ä¸œå©šæ‹è§‚æŠ¥å‘Šæµ·æŠ¥.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
  } catch(e) {
    alert('ç”Ÿæˆæµ·æŠ¥å¤±è´¥ï¼Œè¯·æˆªå›¾ä¿å­˜ã€‚');
  }
}

// â”€â”€â”€ RESET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function resetTest() {
  choices = { 3: null, 4: null, 5: null };
  userType = 'single';
  document.querySelectorAll('.choice-btn').forEach(b => b.classList.remove('selected'));
  document.getElementById('turn-result').classList.remove('show');
  swiper.slideTo(0, 0);
}

// Init first page chart if needed
setTimeout(() => initChart(swiper.activeIndex + 1), 300);
</script>
</body>
</html>
